version: '3.4'

services:
  work:
    build: ./
    command: bash -c "composer install --no-dev -o && php bin/hyperf.php start"
    container_name: hyperf-demo
    environment:
      - APP_ENV=${APP_ENV}
      - TIMEZONE=Asia/Shanghai
    restart: always
    ports:
      - "${HTTP_PORT}:9501"
    volumes:
      - ./:/opt/www
    working_dir: /opt/www